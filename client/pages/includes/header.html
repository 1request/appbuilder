<template name="header">
  <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#sidebar">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="{{pathFor 'main'}}">AppBuilder</a>
      </div>
      <div class="navbar-collapse collapse" id="sidebar">
        <!-- BEGIN TOP NAVIGATION MENU -->
        <ul class="nav navbar-nav header-menu">
          {{#if currentUser}}  
            <li>
              <a href="{{pathFor 'dashboard'}}">Dashboard</a>
            </li>
            <li>
              <a href="{{pathFor 'editMobileApp'}}">Edit apps</a>
            </li>
            <li>
              <a href="{{pathFor 'newNotification'}}">Notifications</a>
            </li>
            <li>
              <a href="{{pathFor 'beacons'}}">Manage beacons</a>
            </li>
          {{/if}}
        </ul>
        <ul class="nav navbar-nav navbar-right">
          {{#if currentUser}}  
            {{> appSelect}}
          {{/if}}
          {{> loginButtons}}
          }
        </ul>
        <!-- END TOP NAVIGATION MENU -->
      </div>
    </div>
  </nav>
</template>

<template name="appSelect">
  {{#if hasMobileApp}}
    <li class="dropdown">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown">
        {{mobileApp.name}}<br/>App Key: {{mobileApp.appKey}}  
        <b class="caret"></b>
      </a>
      <ul class="dropdown-menu">
        {{# each mobileApps}}
          <li><a href="#">{{name}}</a></li>
        {{/ each}}
        <li class="divider"></li>
        <li><a href="{{pathFor 'newMobileApp'}}">Create app</a></li>  
      </ul>
    </li>
  {{else}}
    <li><a href="{{pathFor 'newMobileApp'}}">Create app</a></li>  
  {{/if}}
</template>
